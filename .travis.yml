language: c
#######################################################################################
os:
  - linux
  
sudo: enabled

addons:
  apt:
    packages:
      - curl

#######################################################################################


before_install:

  - sudo apt-get update -qq
  - git clone https://android.googlesource.com/platform/prebuilts/gcc/linux-x86/arm/arm-linux-androideabi-4.9 ~/arm-linux-androideabi-4.9/
  - sudo chmod -R a+x *

#######################################################################################


script:  
  
  
  - export CROSS_COMPILE=~/arm-linux-androideabi-4.9/bin/arm-linux-androideabi-
  - make ARCH=arm mt6737t-grandpplte_defconfig
  - make -j16

after_success:
  - curl --upload-file arch/arm/boot/zImage https://transfer.sh/samsung_g532f_MT6737T_kernel
  
deploy:
  skip_cleanup: true
  provider: releases
  api_key: "$GIT_OAUTH_TOKEN_TB"
  
  on:
    tags: true
    repo: ALGPHELLO/android_kernel_samsung_grandpplteser
    branch: LineageOs-14.1

branches:
  except:
    - /^(?i:untagged)-.*$/
